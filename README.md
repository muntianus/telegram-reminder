# Billion Roadmap Telegram Bot

This project is a tiny Telegram bot written in Go. It sends two messages every day using content generated by OpenAI:

* **13:00 MSK** – Lunch Idea Plan
* **20:00 MSK** – Daily Billion Brief (юг МО, Бутово/Щербинка/Подольск/Воскресенск)

The bot can be deployed on any always‑online environment such as Railway, Fly.io or a VPS.

## Commands

- `/chat <message>` – ask the bot any question and get a reply from OpenAI.
- `/model [name]` – show or change the model used for generation (default `gpt-4o`).

## Requirements

* Go 1.24+
* Telegram bot token (`TELEGRAM_TOKEN`)
* Destination chat ID (`CHAT_ID`)
* OpenAI API key (`OPENAI_API_KEY`)
* OpenAI model name (`OPENAI_MODEL`, optional, defaults to `gpt-4o`)

## Running locally

Set the required environment variables and start the bot:

```sh
export TELEGRAM_TOKEN=your_telegram_token
export CHAT_ID=123456789
export OPENAI_API_KEY=your_openai_key

go run main.go
```

Once started, the scheduler will automatically send the two daily messages at the specified times.
Each request to OpenAI uses a 40-second timeout to avoid hanging jobs.
Before submitting a pull request, run `gofmt -w` to ensure all Go files are properly formatted.

## Deploying on a server

1. Install Go on your server.
2. Clone this repository.
3. Set the environment variables shown above.
4. Build the binary with `go build -o bot`.
5. Run `./bot` or configure a process manager like `systemd`.


## Docker

Build the image for the current platform:

```sh
docker build -t telegram-bot .
```

To build and push a multi-platform image (linux/amd64 and linux/arm64) using
`buildx`:

```sh
docker buildx build --platform linux/amd64,linux/arm64 \
  -t your_dockerhub_user/telegram-bot:latest --push .
```

Run the container:

```sh
docker run -e TELEGRAM_TOKEN=your_token -e CHAT_ID=your_chat_id -e OPENAI_API_KEY=your_api_key telegram-bot
```

You can also run the bot using `docker-compose`. Copy `.env.example` to `.env`, fill in the required values, then start the service. The `DOCKERHUB_USER` variable in `.env` defines the Docker Hub account used in `docker-compose.yml`:

```sh
cp .env.example .env
docker-compose up -d
```

## GitHub Actions Deployment

This repository includes a GitHub Actions workflow that automatically builds and
deploys the Docker image on every push to the `main` branch. It uses Docker
Buildx to create a multi-architecture image. The workflow performs the following
steps:

1. Check out the repository and compile the Go binary.
2. Use Docker Buildx to create and push a multi-platform image
   (linux/amd64 and linux/arm64) to Docker Hub.
3. Connect to the VPS via SSH and restart the container using
   `docker-compose`.

Make sure to configure all required secrets for the workflow in your repository
settings:

* `DOCKERHUB_USER` and `DOCKERHUB_TOKEN` for publishing the image.
* `VPS_SSH_KEY`, `VPS_USER` and `VPS_HOST` for connecting to the server.
* `TELEGRAM_TOKEN`, `OPENAI_API_KEY`, `CHAT_ID` and optionally `OPENAI_MODEL` to
  populate the `.env` file during deployment.

After the deployment job finishes, log into the VPS and run `docker ps` to
verify that the container is up and running.



## License

Released under the [MIT License](LICENSE).
