# ‚öôÔ∏è –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
- [–§–∞–π–ª–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#—Ñ–∞–π–ª–æ–≤–∞—è-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [–ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏](#–ø—Ä–∏–º–µ—Ä—ã-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)
- [–í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫](#–≤–∞–ª–∏–¥–∞—Ü–∏—è-–Ω–∞—Å—Ç—Ä–æ–µ–∫)
- [–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–∞—è-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### üîë –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä | –í–∞–ª–∏–¥–∞—Ü–∏—è |
|------------|----------|---------|-----------|
| `TELEGRAM_TOKEN` | –¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ | `123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11` | –§–æ—Ä–º–∞—Ç: `—á–∏—Å–ª–æ:—Å—Ç—Ä–æ–∫–∞` |
| `OPENAI_API_KEY` | –ö–ª—é—á OpenAI API | `sk-1234567890abcdef...` | –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `sk-` |

### üìã –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –í–∞–ª–∏–¥–∞—Ü–∏—è |
|------------|----------|--------------|-----------|
| `CHAT_ID` | ID —Ü–µ–ª–µ–≤–æ–≥–æ —á–∞—Ç–∞ | –Ω–µ –∑–∞–¥–∞–Ω | –î–∏–∞–ø–∞–∑–æ–Ω Telegram ID |
| `LOG_CHAT_ID` | ID —á–∞—Ç–∞ –¥–ª—è –ª–æ–≥–æ–≤ | –Ω–µ –∑–∞–¥–∞–Ω | –î–∏–∞–ø–∞–∑–æ–Ω Telegram ID |
| `OPENAI_MODEL` | –ú–æ–¥–µ–ª—å OpenAI | `gpt-4.1` | –°–ø–∏—Å–æ–∫ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö |
| `OPENAI_MAX_TOKENS` | –ú–∞–∫—Å–∏–º—É–º —Ç–æ–∫–µ–Ω–æ–≤ | `600` | 1-32768 |
| `LOG_LEVEL` | –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è | `info` | debug/info/warn/error |

### üîß –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è |
|------------|----------|--------------|------------|
| `OPENAI_TOOL_CHOICE` | –†–µ–∂–∏–º tool calling | `auto` | auto/none/required |
| `OPENAI_SERVICE_TIER` | –£—Ä–æ–≤–µ–Ω—å —Å–µ—Ä–≤–∏—Å–∞ | –Ω–µ –∑–∞–¥–∞–Ω | default/flex |
| `OPENAI_REASONING_EFFORT` | –£—Å–∏–ª–∏–µ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏—è | –Ω–µ –∑–∞–¥–∞–Ω | low/medium/high |
| `ENABLE_WEB_SEARCH` | –í–∫–ª—é—á–∏—Ç—å –≤–µ–±-–ø–æ–∏—Å–∫ | `true` | true/false |
| `BLOCKCHAIN_API` | URL API –±–ª–æ–∫—á–µ–π–Ω–∞ | `https://api.blockchain.info/stats` | –í–∞–ª–∏–¥–Ω—ã–π URL |

### ‚è∞ –í—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –§–æ—Ä–º–∞—Ç |
|------------|----------|--------------|--------|
| `LUNCH_TIME` | –í—Ä–µ–º—è –∏–¥–µ–π –¥–ª—è –æ–±–µ–¥–∞ | `13:00` | HH:MM |
| `BRIEF_TIME` | –í—Ä–µ–º—è –≤–µ—á–µ—Ä–Ω–µ–≥–æ –¥–∞–π–¥–∂–µ—Å—Ç–∞ | `20:00` | HH:MM |

### üìÅ –§–∞–π–ª–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è |
|------------|----------|--------------|------------|
| `TASKS_FILE` | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –∑–∞–¥–∞—á | –Ω–µ –∑–∞–¥–∞–Ω | YAML —Ñ–∞–π–ª |
| `TASKS_JSON` | JSON —Å—Ç—Ä–æ–∫–∞ —Å –∑–∞–¥–∞—á–∞–º–∏ | –Ω–µ –∑–∞–¥–∞–Ω | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ TASKS_FILE |
| `WHITELIST_FILE` | –ü—É—Ç—å –∫ whitelist | `whitelist.json` | JSON —Ñ–∞–π–ª |

## –§–∞–π–ª–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### üìã –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á (tasks.yml)

#### –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
```yaml
# –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
model: gpt-4.1
base_prompt: &base |
  –¢–≤–æ–π –±–∞–∑–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç –∑–¥–µ—Å—å.
  –ú–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: {date}, {time}

# –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á
tasks:
  - name: task_name        # –ò–º—è –∫–æ–º–∞–Ω–¥—ã (/task_name)
    time: "09:00"         # –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (HH:MM)
    model: gpt-4.1        # –ú–æ–¥–µ–ª—å –¥–ª—è —ç—Ç–æ–π –∑–∞–¥–∞—á–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    prompt: |             # –ü—Ä–æ–º–ø—Ç –¥–ª—è –∑–∞–¥–∞—á–∏
      –¢–≤–æ–π –ø—Ä–æ–º–ø—Ç –∑–¥–µ—Å—å
  
  - name: another_task
    time: "14:00"
    prompt: *base         # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞
```

#### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –ø—Ä–æ–º–ø—Ç–∞—Ö
```yaml
tasks:
  - name: daily_report
    time: "09:00"  
    prompt: |
      –°–æ–∑–¥–∞–π –æ—Ç—á–µ—Ç –∑–∞ {date}.
      –¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è: {time}
      API –∫—É—Ä—Å–∞ –≤–∞–ª—é—Ç: {exchange_api}
      –ü—É—Ç—å –∫ –≥—Ä–∞—Ñ–∏–∫—É: {chart_path}
```

–î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
- `{date}` - —Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞
- `{time}` - —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è  
- `{exchange_api}` - –∏–∑ `EXCHANGE_API`
- `{chart_path}` - –∏–∑ `CHART_PATH`

### üìù –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (JSON)

#### –ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
export TASKS_JSON='[
  {
    "name": "morning_brief",
    "time": "09:00",
    "model": "gpt-4.1",
    "prompt": "–°–æ–∑–¥–∞–π —É—Ç—Ä–µ–Ω–Ω–∏–π –¥–∞–π–¥–∂–µ—Å—Ç"
  }
]'
```

#### –ß–µ—Ä–µ–∑ —Ñ–∞–π–ª
```json
[
  {
    "name": "morning_brief", 
    "time": "09:00",
    "model": "gpt-4.1",
    "prompt": "–°–æ–∑–¥–∞–π —É—Ç—Ä–µ–Ω–Ω–∏–π –¥–∞–π–¥–∂–µ—Å—Ç"
  },
  {
    "name": "evening_brief",
    "time": "20:00", 
    "prompt": "–°–æ–∑–¥–∞–π –≤–µ—á–µ—Ä–Ω–∏–π –¥–∞–π–¥–∂–µ—Å—Ç"
  }
]
```

### üìã Whitelist (whitelist.json)

```json
[
  123456789,
  -1001234567890,
  987654321
]
```

## –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### üè† –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

#### .env —Ñ–∞–π–ª
```env
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
TELEGRAM_TOKEN=123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11
OPENAI_API_KEY=sk-1234567890abcdef...

# –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
CHAT_ID=123456789
LOG_LEVEL=debug
LOG_CHAT_ID=123456789

# OpenAI –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
OPENAI_MODEL=gpt-4o-mini
OPENAI_MAX_TOKENS=300
ENABLE_WEB_SEARCH=false

# –í—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
LUNCH_TIME=12:00
BRIEF_TIME=18:00

# –§–∞–π–ª—ã
TASKS_FILE=./tasks.yml
WHITELIST_FILE=./whitelist.json
```

#### –ó–∞–ø—É—Å–∫
```bash
source .env
go run ./cmd/bot
```

### üê≥ Docker —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

#### docker-compose.yml
```yaml
version: '3.8'

services:
  telegram-bot:
    build: .
    environment:
      - TELEGRAM_TOKEN=${TELEGRAM_TOKEN}
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - CHAT_ID=${CHAT_ID}
      - LOG_LEVEL=info
      - OPENAI_MODEL=gpt-4.1
      - OPENAI_MAX_TOKENS=600
    volumes:
      - ./tasks.yml:/app/tasks.yml:ro
      - ./data:/app/data
    restart: unless-stopped
```

### üè≠ –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–∞—è —Å—Ä–µ–¥–∞

#### Kubernetes ConfigMap
```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: telegram-bot-config
data:
  OPENAI_MODEL: "gpt-4.1"
  OPENAI_MAX_TOKENS: "600"
  LOG_LEVEL: "info"
  ENABLE_WEB_SEARCH: "true"
  BLOCKCHAIN_API: "https://api.blockchain.info/stats"
  LUNCH_TIME: "13:00"
  BRIEF_TIME: "20:00"
```

#### Kubernetes Secret
```yaml
apiVersion: v1
kind: Secret
metadata:
  name: telegram-bot-secrets
type: Opaque
stringData:
  TELEGRAM_TOKEN: "123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11"
  OPENAI_API_KEY: "sk-1234567890abcdef..."
  CHAT_ID: "123456789"
  LOG_CHAT_ID: "-1001234567890"
```

#### Docker Swarm
```yaml
version: '3.8'

services:
  telegram-bot:
    image: telegram-bot:latest
    deploy:
      replicas: 1
      restart_policy:
        condition: on-failure
        delay: 5s
        max_attempts: 3
    environment:
      - OPENAI_MODEL=gpt-4.1
      - LOG_LEVEL=info
    secrets:
      - telegram_token
      - openai_api_key
    configs:
      - source: tasks_config
        target: /app/tasks.yml

secrets:
  telegram_token:
    external: true
  openai_api_key:
    external: true

configs:
  tasks_config:
    file: ./tasks.yml
```

## –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫

### üîç –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:

#### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
```go
if telegramToken == "" || openaiKey == "" {
    return cfg, fmt.Errorf("missing required env vars")
}
```

#### Chat ID –¥–∏–∞–ø–∞–∑–æ–Ω—ã
```go
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: 1 –¥–æ 2,147,483,647
// –ì—Ä—É–ø–ø—ã/–∫–∞–Ω–∞–ª—ã: -2,147,483,648 –¥–æ -1
if chatID > 0 && chatID > 2147483647 {
    return fmt.Errorf("user ID too large")
}
```

#### –ß–∏—Å–ª–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
```go
maxTokens := 600
if maxTokensStr != "" {
    if v, err := strconv.Atoi(maxTokensStr); err == nil {
        maxTokens = v
    }
}
```

### ‚úÖ –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

#### –°–∫—Ä–∏–ø—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏
```bash
#!/bin/bash
# validate_config.sh

echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏..."

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
if [[ -z "$TELEGRAM_TOKEN" ]]; then
    echo "‚ùå TELEGRAM_TOKEN –Ω–µ –∑–∞–¥–∞–Ω"
    exit 1
fi

if [[ -z "$OPENAI_API_KEY" ]]; then
    echo "‚ùå OPENAI_API_KEY –Ω–µ –∑–∞–¥–∞–Ω"
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ TELEGRAM_TOKEN
if [[ ! "$TELEGRAM_TOKEN" =~ ^[0-9]+:.+ ]]; then
    echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç TELEGRAM_TOKEN"
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ OPENAI_API_KEY
if [[ ! "$OPENAI_API_KEY" =~ ^sk-.+ ]]; then
    echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç OPENAI_API_KEY"
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ CHAT_ID
if [[ -n "$CHAT_ID" ]]; then
    if [[ ! "$CHAT_ID" =~ ^-?[0-9]+$ ]]; then
        echo "‚ùå CHAT_ID –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —á–∏—Å–ª–æ–º"
        exit 1
    fi
    
    if [[ "$CHAT_ID" -eq 0 ]]; then
        echo "‚ùå CHAT_ID –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å 0"
        exit 1
    fi
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤
if [[ -n "$TASKS_FILE" && ! -f "$TASKS_FILE" ]]; then
    echo "‚ö†Ô∏è  –§–∞–π–ª –∑–∞–¥–∞—á $TASKS_FILE –Ω–µ –Ω–∞–π–¥–µ–Ω"
fi

if [[ -n "$WHITELIST_FILE" && ! -f "$WHITELIST_FILE" ]]; then
    echo "‚ö†Ô∏è  –§–∞–π–ª whitelist $WHITELIST_FILE –Ω–µ –Ω–∞–π–¥–µ–Ω"
fi

echo "‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∞–ª–∏–¥–Ω–∞"
```

### üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

#### Dry-run —Ä–µ–∂–∏–º
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±–µ–∑ –∑–∞–ø—É—Å–∫–∞
go run ./cmd/bot --dry-run
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
```bash
# –¢–µ—Å—Ç Telegram API
curl -s "https://api.telegram.org/bot$TELEGRAM_TOKEN/getMe"

# –¢–µ—Å—Ç OpenAI API
curl -s "https://api.openai.com/v1/models" \
  -H "Authorization: Bearer $OPENAI_API_KEY"
```

## –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

#### –†–æ—Ç–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤
```bash
# –°–∫—Ä–∏–ø—Ç —Ä–æ—Ç–∞—Ü–∏–∏ API –∫–ª—é—á–µ–π
#!/bin/bash
NEW_OPENAI_KEY="sk-–Ω–æ–≤—ã–π-–∫–ª—é—á"
OLD_OPENAI_KEY="$OPENAI_API_KEY"

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ —Å–µ–∫—Ä–µ—Ç–∞—Ö
kubectl patch secret telegram-bot-secrets \
  --patch '{"stringData":{"OPENAI_API_KEY":"'$NEW_OPENAI_KEY'"}}'

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø–æ–¥–æ–≤
kubectl rollout restart deployment telegram-bot

# –î–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è —Å—Ç–∞—Ä–æ–≥–æ –∫–ª—é—á–∞ (–ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏)
# curl -X DELETE "https://api.openai.com/v1/keys/$OLD_OPENAI_KEY"
```

#### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```yaml
# Prometheus –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- name: config_validation
  rules:
  - alert: InvalidChatID
    expr: telegram_bot_config_errors{type="chat_id"} > 0
    for: 1m
    annotations:
      summary: "–ù–µ–≤–µ—Ä–Ω—ã–π Chat ID –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏"
      
  - alert: MissingRequiredEnv
    expr: telegram_bot_config_errors{type="required_env"} > 0
    for: 0s
    annotations:
      summary: "–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è"
```

### üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–∫

#### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```go
logger.L.Info("Bot configuration loaded",
    "model", cfg.OpenAIModel,
    "max_tokens", cfg.OpenAIMaxTokens,
    "web_search_enabled", cfg.EnableWebSearch,
    "chat_id_set", cfg.ChatID != 0,
)
```

#### Healthcheck endpoint
```go
func healthCheck(cfg Config) http.HandlerFunc {
    return func(w http.ResponseWriter, r *http.Request) {
        status := map[string]interface{}{
            "status": "ok",
            "config": map[string]interface{}{
                "model": cfg.OpenAIModel,
                "web_search": cfg.EnableWebSearch,
                "chat_configured": cfg.ChatID != 0,
            },
        }
        json.NewEncoder(w).Encode(status)
    }
}
```

---

**üí° –°–æ–≤–µ—Ç:** –í—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ä–µ–¥–µ –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.

**üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞:** –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞ —Å —É—Ä–æ–≤–Ω–µ–º `debug` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.